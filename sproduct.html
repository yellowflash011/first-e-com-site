<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    />
  </head>

  <body>
    <!-- Header Section -->
    <section id="header">
      <a class="header-img" href="index.html">
        <img src="img/logo.png" class="logo" alt="LOGO" />
      </a>
      <div>
        <ul id="navbar">
          <li><a href="index.html">HOME</a></li>
          <li><a href="shop.html">SHOP</a></li>
          <li>
            <a id="lg-bag" href="cart.html"
              ><i class="fa fa-shopping-cart"></i
            ></a>
          </li>
          <a href="#" id="close">
            <i class="far fa-times"></i>
          </a>
        </ul>
      </div>
      <div id="mobile">
        <a href="cart.html"><i class="far fa-shopping-bag"></i></a>
        <i id="bar" class="fas fa-outdent"></i>
      </div>
    </section>
    <section id="prodetails" class="section-p1">
      <div class="single-pro-image">
        <!-- Main Image for Product -->
        <img id="MainImg" width="100%" alt="Product Image" />
        <div class="small-img-group">
          <div class="small-img-col">
            <img id="SmallImg1" width="100%" class="small-img" alt="" />
          </div>
          <div class="small-img-col">
            <img id="SmallImg2" width="100%" class="small-img" alt="" />
          </div>
          <div class="small-img-col">
            <img id="SmallImg3" width="100%" class="small-img" alt="" />
          </div>
        </div>
      </div>

      <div class="single-pro-details">
        <h6 id="category">Home / Product</h6>
        <h4 id="product-name">Product Name</h4>
        <h2 id="product-price">$0</h2>

        <!-- Select Memory Size (GPU Memory Options) -->
        <select id="memory-select">
          <option>Select Memory Size</option>
          <option>4GB</option>
          <option>8GB</option>
          <option>12GB</option>
          <option>24GB</option>
        </select>

        <input type="number" value="1" id="quantity" />
        <button class="normal" onclick="addToCart()">Add To Cart</button>

        <h4>Product Details</h4>
        <span id="product-description">Product Description</span>
      </div>
    </section>

    <!-- Footer Section -->
    <footer class="section-p1">
      <div class="col">
        <img src="img/logo.png" alt="" id="imgg" />
        <h4>Contact</h4>
        <p>
          <strong>Address: </strong> 562 Wellington Road, Street 32, San
          Francisco
        </p>
        <p><strong>Phone: </strong> +01 2222 365 / (+91) 01 2345 6789</p>
        <p><strong>Hours: </strong> 10:00 - 18:00, Mon - Sat</p>
        <div class="follow">
          <h4>Follow us</h4>
          <div class="icon">
            <i class="fab fa-facebook-f"></i>
            <i class="fab fa-twitter"></i>
            <i class="fab fa-instagram"></i>
            <i class="fab fa-pinterest-p"></i>
            <i class="fab fa-youtube"></i>
          </div>
        </div>
      </div>
      <div class="col">
        <h4>About</h4>
        <a href="#">About us</a>
        <a href="#">Delivery Information</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms & Conditions</a>
        <a href="#">Contact Us</a>
      </div>
      <div class="col">
        <h4>My Account</h4>
        <a href="#">Sign In</a>
        <a href="#">View Cart</a>
        <a href="#">My Wishlist</a>
        <a href="#">Track My Order</a>
        <a href="#">Help</a>
      </div>
      <div class="col install">
        <h4>Install App</h4>
        <p>From App Store or Google Play</p>
        <div class="row">
          <img class="logo" src="img/pay/app.jpg" alt="" />
          <img src="img/pay/play.jpg" alt="" />
        </div>
        <p>Secured Payment Gateways</p>
        <img src="img/pay/pay.png" alt="" />
      </div>

      <div class="copyright">
        <p>Â© 2025 Hussain Nazir Works. All Right Reserved</p>
      </div>
    </footer>
    <script>
      // Image switching
      var MainImg = document.getElementById("MainImg");
      var smallimg = document.getElementsByClassName("small-img");
      for (let i = 0; i < smallimg.length; i++) {
        smallimg[i].onclick = function () {
          MainImg.src = smallimg[i].src;
        };
      }

      // Fetch product data
      fetch("products.json")
        .then((response) => {
          if (!response.ok) throw new Error("Failed to fetch products");
          return response.json();
        })
        .then((products) => {
          const urlParams = new URLSearchParams(window.location.search);
          const productId = urlParams.get("product");
          const product = products.find((p) => p.id === productId);
          if (product) {
            document.getElementById("product-name").textContent = product.name;
            document.getElementById("product-price").textContent =
              product.price;
            document.getElementById("product-description").textContent =
              product.description;
            document.getElementById(
              "category"
            ).textContent = `${product.category} / ${product.name}`;
            document.getElementById("MainImg").src = product.mainImage;
            document.getElementById("SmallImg1").src =
              product.images[1] || product.mainImage;
            document.getElementById("SmallImg2").src =
              product.images[2] || product.mainImage;
            document.getElementById("SmallImg3").src =
              product.images[0] || product.mainImage;
          } else {
            document.getElementById("product-name").textContent =
              "Product Not Found";
          }
        })
        .catch((error) => console.error("Error fetching product data:", error));

      // Initialize cart
      if (!localStorage.getItem("cart")) {
        localStorage.setItem("cart", JSON.stringify([]));
      }

      // Add to cart
      function addToCart() {
        const productId = new URLSearchParams(window.location.search).get(
          "product"
        );
        fetch("products.json")
          .then((response) => {
            if (!response.ok) throw new Error("Failed to fetch products");
            return response.json();
          })
          .then((products) => {
            const product = products.find((p) => p.id === productId);
            if (!product) {
              alert("Product not found!");
              return;
            }
            const productName = product.name;
            const productPrice =
              parseFloat(product.price.replace("$", "")) || 0;
            const productDescription = product.description;
            const productImage = product.mainImage;
            const productQuantity =
              Math.max(
                1,
                parseInt(document.getElementById("quantity").value)
              ) || 1;
            const productMemory =
              document.getElementById("memory-select").value;
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let existingProduct = cart.find(
              (item) => item.id === productId && item.memory === productMemory
            );
            if (existingProduct) {
              existingProduct.quantity += productQuantity;
            } else {
              cart.push({
                id: productId,
                name: productName,
                price: productPrice,
                description: productDescription,
                image: productImage,
                quantity: productQuantity,
                memory: productMemory,
              });
            }
            localStorage.setItem("cart", JSON.stringify(cart));
            alert(`${productName} (${productMemory}) added to cart!`);
          })
          .catch((error) => {
            console.error("Error adding to cart:", error);
            alert("Error adding item to cart.");
          });
      }
    </script>

    <!-- Optional: Add additional JavaScript if needed -->
    <script src="script.js"></script>
  </body>
</html>
